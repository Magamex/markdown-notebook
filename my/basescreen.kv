#:import MarkdownLexer pygments.lexers.markup.MarkdownLexer

<BaseScreen>:
    note_tree: note_tree
    note_viewer: note_viewer
    note_title: note_title
    note_editor: note_editor
    name: 'base'

    BoxLayout:
        ScreenManager:
            id: manager

            Screen:
                name: 'fm_screen'
                FloatLayout:
                    id: fm

            Screen:
                name: 'note_tree_screen'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                ScrollView:
                    TreeView:
                        id: note_tree
                        hide_root: True
                        indent_level: 10
                        size_hint_y: None
                        select_node: root._select_note_heading

            Screen:
                name: 'note_viewer_screen'
                RstDocument:
                    id: note_viewer
                MDFloatingActionButton:
                    icon: 'file-document-edit-outline'
                    md_bg_color: app.theme_cls.primary_color
                    x: Window.width - self.width - dp(10)
                    y: dp(10)
                    on_release: root._open_note_editor()

            Screen:
                name: 'note_editor_screen'
                BoxLayout:
                    orientation: 'vertical'
                    MDTextField:
                        id: note_title
                        hint_text: 'Heading text'
                    ScrollView:
                        do_scroll_x: False
                        CodeInput:
                            id: note_editor
                            lexer: MarkdownLexer()
                            size_hint_y: None